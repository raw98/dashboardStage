function d33(t,e,o,a){console.log("new data");const l=d3.select("svg"),n=l.attr("height"),r=(d3.geoPath(),d3.map());worldmap="https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson";var s=[];let c;const i=document.querySelector(".my_dataviz").style.width;console.log("fontsize 1: "+i);var d=i.replace("vw","");console.log("fontsize 2: "+Number(d));const p=d3.geoRobinson().scale(130).translate([d/2,n/2]),u=d3.scaleThreshold().domain([1e5,1e6,1e7,3e7,1e8,5e8]).range(d3.schemeOrRd[7]),g=d3.select("body").append("div").attr("class","tooltip").style("background-color","white").style("padding-right","10px").style("padding-left","10px").style("opacity",0);function y(e,o){console.log("new config");c=l.append("g").attr("class","world"),c.selectAll("path").data(o.features).enter().append("path").attr("d",d3.geoPath().projection(p)).attr("data-name",function(t){return t.properties.name}).attr("fill",function(t){return t.total=r.get(t.id)||0,u(t.total)}).style("stroke","transparent").attr("class",function(t){return"Country"}).attr("id",function(t){return t.id}).style("opacity",1).on("mouseover",function(t){d3.selectAll(".Country").transition().duration(200).style("opacity",.5).style("stroke","transparent"),d3.select(this).transition().duration(200).style("opacity",1).style("stroke","black"),g.style("left",d3.event.pageX+15+"px").style("top",d3.event.pageY-28+"px").transition().duration(400).style("opacity",1).text(t.properties.name+": "+Math.round(t.total/1e6*10)/10+" mio.")}).on("mouseleave",function(){d3.selectAll(".Country").transition().duration(200).style("opacity",1).style("stroke","transparent"),g.transition().duration(300).style("opacity",0)}),"none"!==a&&(console.log(a),console.log("world1 : "+JSON.stringify(c)),c.selectAll("world.node").select("g").remove(),console.log("world2 : "+JSON.stringify(c)),t.getLocalisation(a).subscribe(t=>{t.forEach(t=>{s.push({lon:t.lon,lat:t.lat}),console.log(t.name)}),console.log("markerData: "+JSON.stringify(s));var e=c.selectAll("world.node").data(s).enter().append("g").attr("class","node").attr("transform",function(t){return console.log(p([t.lon,t.lat])[0]+","+p([t.lon,t.lat])[1]),"translate("+p([t.lon,t.lat])[0]+","+p([t.lon,t.lat])[1]+")"});e.append("path").attr("d","M16,0C9.382,0,4,5.316,4,12.001c0,7,6.001,14.161,10.376,19.194   C14.392,31.215,15.094,32,15.962,32c0.002,0,0.073,0,0.077,0c0.867,0,1.57-0.785,1.586-0.805   c4.377-5.033,10.377-12.193,10.377-19.194C28.002,5.316,22.619,0,16,0z M16.117,29.883c-0.021,0.02-0.082,0.064-0.135,0.098   c-0.01-0.027-0.084-0.086-0.129-0.133C12.188,25.631,6,18.514,6,12.001C6,6.487,10.487,2,16,2c5.516,0,10.002,4.487,10.002,10.002   C26.002,18.514,19.814,25.631,16.117,29.883z").attr("fillrule","evenodd").attr("cliprule","evenodd").attr("fill","#333333"),e.append("path").attr("d","M16.002,17.746c3.309,0,6-2.692,6-6s-2.691-6-6-6   c-3.309,0-6,2.691-6,6S12.693,17.746,16.002,17.746z M16.002,6.746c2.758,0,5,2.242,5,5s-2.242,5-5,5c-2.758,0-5-2.242-5-5   S13.244,6.746,16.002,6.746z").attr("fillrule","evenodd").attr("cliprule","evenodd").attr("fill","#333333"),console.log(e)}))}t.getData(o).subscribe(t=>{worldpopulation="https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world_population.csv",function(t){t.forEach(t=>{r.set(t.code,t.vente)})}(t),d3.queue().defer(d3.json,worldmap).await(y)}),l.append("rect").attr("class","background").attr("width","0").attr("height",n)}